# Remove unrelated CICD platform files
{{ $project_name_alphanumeric_underscore := (regexp `-`).ReplaceAllString ((regexp `[^A-Za-z0-9_-]`).ReplaceAllString .input_project_name ``) `_` -}}
{{ $root_dir := .input_root_dir}}

{{ if (eq .input_setup_cicd_and_project `Project_Only`) }}
    {{ skip (printf `%s/%s` $root_dir `.azure`) }}
    {{ skip (printf `%s/%s` $root_dir `.github`) }}
    {{ skip (printf `%s/%s` $root_dir `docs`) }}
    {{ skip (printf `%s/%s` $root_dir `.gitignore`) }}
    {{ skip (printf `%s/%s` $root_dir `README.md`) }}
    {{ skip (printf `%s/%s` $root_dir `test-requirements.txt`) }}
    {{ skip (printf `%s/%s` $root_dir `cicd.tar.gz`) }}
    {{ skip (printf `%s/%s` $root_dir `cicd_params.json`) }}
{{ else if (eq .input_setup_cicd_and_project `CICD_Only`) }}
    {{ skip (printf `%s/%s` $root_dir $project_name_alphanumeric_underscore) }}
    {{ skip (printf `%s/%s/%s-*` $root_dir `.github/workflows` .input_project_name) }}
    {{ skip (printf `%s/%s/%s-*` $root_dir `.azure/devops-pipelines` .input_project_name) }}
{{ end }}

{{ skip (printf `%s/%s` $root_dir `.github`) }}
{{ skip (printf `%s/%s` $root_dir `.gitlab`) }}

{{ if (not (eq .input_project_name `27896cf3-bb3e-476e-8129-96df0406d5c7`)) }}
    {{ skip (printf `%s/%s` $root_dir `_params_testing_only.txt`) }}
{{ end }}

# Remove Feature Store code since it's not used
# feature_store_paths
{{ skip (printf `%s/%s/%s` $root_dir $project_name_alphanumeric_underscore `feature_engineering`) }}
{{ skip (printf `%s/%s/%s` $root_dir $project_name_alphanumeric_underscore `tests/feature_engineering`) }}
{{ skip (printf `%s/%s/%s` $root_dir $project_name_alphanumeric_underscore `training/notebooks/TrainWithFeatureStore.py`) }}
{{ skip (printf `%s/%s/%s` $root_dir $project_name_alphanumeric_underscore `resources/feature-engineering-workflow-resource.yml`) }}

# Remove utils if using Models in Unity Catalog
{{ if (eq .input_include_models_in_unity_catalog `yes`) }}
    {{ skip (printf `%s/%s/%s` $root_dir $project_name_alphanumeric_underscore `utils.py`) }}
{{ end }}

# Remove template files
{{ skip (printf `%s/%s` $root_dir `cicd`) }}
{{ skip `update_layout` }}
{{ skip `run_validations` }}
